<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Erkebulan Music Stream</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body {
      margin: 0;
      font-family: 'Montserrat', sans-serif;
      background: linear-gradient(to right, #1e1e2f, #3c3c5c);
      color: white;
      padding: 40px 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
    }

    h1 {
      font-size: 3rem;
      margin-bottom: 40px;
      text-align: center;
    }

    h1 span {
      color: #ff4b5c;
      font-weight: 700;
    }

    .music-container {
      display: flex;
      flex-direction: column;
      width: 90%;
      max-width: 700px;
      background-color: #2a2a3b;
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
      margin-bottom: 25px;
      transition: transform 0.2s;
    }

    .music-container:hover {
      transform: scale(1.02);
    }

    .music-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 15px;
    }

    .music-info {
      display: flex;
      align-items: center;
      gap: 20px;
      flex-grow: 1;
    }

    .music-image {
      width: 60px;
      height: 60px;
      border-radius: 10px;
      object-fit: cover;
    }

    .music-details {
      text-align: left;
      flex-grow: 1;
    }

    .music-title {
      font-size: 1.2rem;
      font-weight: bold;
      margin-bottom: 5px;
    }

    .music-artist {
      font-size: 0.9rem;
      color: #aaa;
    }

    .music-controls {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .music-button {
      background: linear-gradient(135deg, #6e8efb, #a777e3);
      color: white;
      padding: 8px 15px;
      font-size: 0.9rem;
      border: none;
      cursor: pointer;
      border-radius: 30px;
      transition: transform 0.2s, box-shadow 0.2s;
      white-space: nowrap;
    }

    .music-button:hover {
      transform: scale(1.05);
      box-shadow: 0 4px 15px rgba(166, 119, 227, 0.5);
    }

    .heart {
      font-size: 1.5em;
      cursor: pointer;
      transition: color 0.3s, transform 0.3s;
      color: #555;
    }

    .heart.liked {
      color: red;
      transform: scale(1.2);
    }

    .song-player {
      width: 100%;
      margin-top: 10px;
      display: none;
    }

    .song-player.active {
      display: block;
    }

    .song-player audio {
      width: 100%;
      height: 40px;
    }

    .random-button {
      margin-top: 30px;
      padding: 10px 20px;
      background: linear-gradient(135deg, #ff6f91, #ff4b5c);
      color: white;
      font-size: 1.1rem;
      border: none;
      cursor: pointer;
      border-radius: 30px;
      transition: transform 0.2s, box-shadow 0.2s;
    }

    .random-button:hover {
      transform: scale(1.05);
      box-shadow: 0 4px 15px rgba(255, 79, 92, 0.5);
    }

    .filter-buttons {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
    }

    .filter-button {
      padding: 8px 16px;
      background: linear-gradient(135deg, #4facfe, #00f2fe);
      color: white;
      border: none;
      border-radius: 20px;
      cursor: pointer;
      transition: all 0.3s;
    }

    .filter-button.active {
      background: linear-gradient(135deg, #ff6f91, #ff4b5c);
      box-shadow: 0 4px 15px rgba(255, 79, 92, 0.5);
    }

    .filter-button:hover {
      transform: scale(1.05);
    }

    @media (max-width: 768px) {
      body {
        padding: 20px 10px;
      }

      h1 {
        font-size: 2rem;
        margin-bottom: 20px;
      }

      .music-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 15px;
      }

      .music-controls {
        width: 100%;
        justify-content: space-between;
      }

      .music-button {
        width: 100%;
      }

      .filter-buttons {
        flex-direction: column;
        width: 100%;
      }

      .filter-button {
        width: 100%;
      }
    }
  </style>
</head>
<body>

<h1><span>Erkebulan</span> Local Music Stream</h1>

<a href="quiz.html">
  <button class="music-button">❓ Викторина: Достопримечательности</button>
</a>

<br>

<div class="filter-buttons">
  <button class="filter-button active" onclick="filterSongs('all')">Все песни</button>
  <button class="filter-button" onclick="filterSongs('kz')">Қазақша</button>
</div>

<!-- Someone -->
<div class="music-container" data-index="0" data-language="en">
  <div class="music-header">
    <div class="music-info">
      <img class="music-image" src="/images/someone.jpg" alt="Someone">
      <div class="music-details">
        <div class="music-title">Someone</div>
        <div class="music-artist">Vanotek feat. Denitia</div>
      </div>
    </div>
    <div class="music-controls">
      <button class="music-button" onclick="playSong(0)">▶ Play</button>
      <div class="heart" onclick="toggleHeart(this)">❤️</div>
    </div>
  </div>
  <div class="song-player">
    <audio controls></audio>
  </div>
</div>

<!-- Other People -->
<div class="music-container" data-index="1" data-language="en">
  <div class="music-header">
    <div class="music-info">
      <img class="music-image" src="/images/other-people.jpg" alt="Other People">
      <div class="music-details">
        <div class="music-title">Other People</div>
        <div class="music-artist">LP</div>
      </div>
    </div>
    <div class="music-controls">
      <button class="music-button" onclick="playSong(1)">▶ Play</button>
      <div class="heart" onclick="toggleHeart(this)">❤️</div>
    </div>
  </div>
  <div class="song-player">
    <audio controls></audio>
  </div>
</div>

<!-- Beinen -->
<div class="music-container" data-index="2" data-language="kz">
  <div class="music-header">
    <div class="music-info">
      <img class="music-image" src="/images/beinen.jpg" alt="Beinen">
      <div class="music-details">
        <div class="music-title">Beinen</div>
        <div class="music-artist">Madeniyet</div>
      </div>
    </div>
    <div class="music-controls">
      <button class="music-button" onclick="playSong(2)">▶ Play</button>
      <div class="heart" onclick="toggleHeart(this)">❤️</div>
    </div>
  </div>
  <div class="song-player">
    <audio controls></audio>
  </div>
</div>

<!-- Jaryq -->
<div class="music-container" data-index="3" data-language="kz">
  <div class="music-header">
    <div class="music-info">
      <img class="music-image" src="/images/jaryq.jpg" alt="Jaryq">
      <div class="music-details">
        <div class="music-title">Jaryq</div>
        <div class="music-artist">Koba Mans</div>
      </div>
    </div>
    <div class="music-controls">
      <button class="music-button" onclick="playSong(3)">▶ Play</button>
      <div class="heart" onclick="toggleHeart(this)">❤️</div>
    </div>
  </div>
  <div class="song-player">
    <audio controls></audio>
  </div>
</div>

<!-- Thousand years -->
<div class="music-container" data-index="4" data-language="en">
  <div class="music-header">
    <div class="music-info">
      <img class="music-image" src="/images/thousand-years.jpg" alt="Thousand years">
      <div class="music-details">
        <div class="music-title">Thousand years</div>
        <div class="music-artist">Christina Perri</div>
      </div>
    </div>
    <div class="music-controls">
      <button class="music-button" onclick="playSong(4)">▶ Play</button>
      <div class="heart" onclick="toggleHeart(this)">❤️</div>
    </div>
  </div>
  <div class="song-player">
    <audio controls></audio>
  </div>
</div>

<!-- SAD-XXXTentacion -->
<div class="music-container" data-index="5" data-language="en">
  <div class="music-header">
    <div class="music-info">
      <img class="music-image" src="/images/sad.jpg" alt="SAD">
      <div class="music-details">
        <div class="music-title">SAD-XXXTentacion</div>
        <div class="music-artist">XXXTentacion</div>
      </div>
    </div>
    <div class="music-controls">
      <button class="music-button" onclick="playSong(5)">▶ Play</button>
      <div class="heart" onclick="toggleHeart(this)">❤️</div>
    </div>
  </div>
  <div class="song-player">
    <audio controls></audio>
  </div>
</div>

<!-- Hurts so good -->
<div class="music-container" data-index="6" data-language="en">
  <div class="music-header">
    <div class="music-info">
      <img class="music-image" src="/images/hurts-so-good.jpg" alt="Hurts so good">
      <div class="music-details">
        <div class="music-title">Hurts so good</div>
        <div class="music-artist">Astrid S</div>
      </div>
    </div>
    <div class="music-controls">
      <button class="music-button" onclick="playSong(6)">▶ Play</button>
      <div class="heart" onclick="toggleHeart(this)">❤️</div>
    </div>
  </div>
  <div class="song-player">
    <audio controls></audio>
  </div>
</div>

<!-- Gata only -->
<div class="music-container" data-index="7" data-language="en">
  <div class="music-header">
    <div class="music-info">
      <img class="music-image" src="/images/gata-only.jpg" alt="Gata only">
      <div class="music-details">
        <div class="music-title">Gata only</div>
        <div class="music-artist">FloyyMenor, Cris Mj</div>
      </div>
    </div>
    <div class="music-controls">
      <button class="music-button" onclick="playSong(7)">▶ Play</button>
      <div class="heart" onclick="toggleHeart(this)">❤️</div>
    </div>
  </div>
  <div class="song-player">
    <audio controls></audio>
  </div>
</div>

<!-- Ocean drive -->
<div class="music-container" data-index="8" data-language="en">
  <div class="music-header">
    <div class="music-info">
      <img class="music-image" src="/images/ocean-drive.jpg" alt="Ocean drive">
      <div class="music-details">
        <div class="music-title">Ocean drive</div>
        <div class="music-artist">Duke Dumont</div>
      </div>
    </div>
    <div class="music-controls">
      <button class="music-button" onclick="playSong(8)">▶ Play</button>
      <div class="heart" onclick="toggleHeart(this)">❤️</div>
    </div>
  </div>
  <div class="song-player">
    <audio controls></audio>
  </div>
</div>

<!-- Back to me -->
<div class="music-container" data-index="9" data-language="en">
  <div class="music-header">
    <div class="music-info">
      <img class="music-image" src="/images/back-to-me.jpg" alt="Back to me">
      <div class="music-details">
        <div class="music-title">Back to me</div>
        <div class="music-artist">Vanotek feat. Denitia</div>
      </div>
    </div>
    <div class="music-controls">
      <button class="music-button" onclick="playSong(9)">▶ Play</button>
      <div class="heart" onclick="toggleHeart(this)">❤️</div>
    </div>
  </div>
  <div class="song-player">
    <audio controls></audio>
  </div>
</div>

<!-- Tattoo -->
<div class="music-container" data-index="10" data-language="en">
  <div class="music-header">
    <div class="music-info">
      <img class="music-image" src="/images/tattoo.jpg" alt="Tattoo">
      <div class="music-details">
        <div class="music-title">Tattoo</div>
        <div class="music-artist">Loreen</div>
      </div>
    </div>
    <div class="music-controls">
      <button class="music-button" onclick="playSong(10)">▶ Play</button>
      <div class="heart" onclick="toggleHeart(this)">❤️</div>
    </div>
  </div>
  <div class="song-player">
    <audio controls></audio>
  </div>
</div>

<!-- Bir gajap -->
<div class="music-container" data-index="11" data-language="kz">
  <div class="music-header">
    <div class="music-info">
      <img class="music-image" src="/images/bir-gajap.jpg" alt="Tattoo">
      <div class="music-details">
        <div class="music-title">Bir gajap</div>
        <div class="music-artist">Қанат Ерлан</div>
      </div>
    </div>
    <div class="music-controls">
      <button class="music-button" onclick="playSong(11)">▶ Play</button>
      <div class="heart" onclick="toggleHeart(this)">❤️</div>
    </div>
  </div>
  <div class="song-player">
    <audio controls></audio>
  </div>
</div>

<!-- Eski suret -->
<div class="music-container" data-index="12" data-language="kz">
  <div class="music-header">
    <div class="music-info">
      <img class="music-image" src="/images/eski-suret.jpg" alt="Eski suret">
      <div class="music-details">
        <div class="music-title">Eski suret</div>
        <div class="music-artist">IL'HAN</div>
      </div>
    </div>
    <div class="music-controls">
      <button class="music-button" onclick="playSong(12)">▶ Play</button>
      <div class="heart" onclick="toggleHeart(this)">❤️</div>
    </div>
  </div>
  <div class="song-player">
    <audio controls></audio>
  </div>
</div>

<!-- Zhanbyr -->
<div class="music-container" data-index="13" data-language="kz">
  <div class="music-header">
    <div class="music-info">
      <img class="music-image" src="/images/zhanbyr.png" alt="Zhanbyr">
      <div class="music-details">
        <div class="music-title">Zhańbyr</div>
        <div class="music-artist">Dosekesh</div>
      </div>
    </div>
    <div class="music-controls">
      <button class="music-button" onclick="playSong(13)">▶ Play</button>
      <div class="heart" onclick="toggleHeart(this)">❤️</div>
    </div>
  </div>
  <div class="song-player">
    <audio controls></audio>
  </div>
</div>

<!-- Mars -->
<div class="music-container" data-index="14" data-language="kz">
  <div class="music-header">
    <div class="music-info">
      <img class="music-image" src="/images/mars.jpg" alt="Mars">
      <div class="music-details">
        <div class="music-title">Mars</div>
        <div class="music-artist">IL'HAN</div>
      </div>
    </div>
    <div class="music-controls">
      <button class="music-button" onclick="playSong(14)">▶ Play</button>
      <div class="heart" onclick="toggleHeart(this)">❤️</div>
    </div>
  </div>
  <div class="song-player">
    <audio controls></audio>
  </div>
</div>

<button class="random-button" id="random-button">Random</button>

<script>
  let currentSongIndex = -1;
  let audioPlayers = [];
  let currentFilter = 'all';

  const songs = [
    {
      title: "Someone",
      artist: "Vanotek feat. Denitia",
      image: "/images/someone.jpg",
      file: "Vanotek feat. Denitia - Someone.wav",
      language: "en"
    },
    {
      title: "Other People",
      artist: "LP",
      image: "/images/other-people.jpg",
      file: "LP - Other People.wav",
      language: "en"
    },
    {
      title: "Beinen",
      artist: "Madeniyet",
      image: "/images/beinen.jpg",
      file: "madeniyett-beinen-bejne_(muzzona.kz).wav",
      language: "kz"
    },
    {
      title: "Jaryq",
      artist: "Koba Mans",
      image: "/images/jaryq.jpg",
      file: "1645357455_koba-mans-jaryq_(uzxit.net).wav",
      language: "kz"
    },
    {
      title: "Thousand years",
      artist: "Christina Perri",
      image: "/images/thousand-years.jpg",
      file: "Christina Perri - A Thousand Years.mp3",
      language: "en"
    },
    {
      title: "SAD-XXXTentacion",
      artist: "XXXTentacion",
      image: "/images/sad.jpg",
      file: "XXXTENTACION - SAD!_(play.muzfan.net).mp3",
      language: "en"
    },
    {
      title: "Hurts so good",
      artist: "Astrid S",
      image: "/images/hurts-so-good.jpg",
      file: "Astrid S - Hurts So Good.mp3",
      language: "en"
    },
    {
      title: "Gata only",
      artist: "FloyyMenor, Cris Mj",
      image: "/images/gata-only.jpg",
      file: "FloyyMenor, Cris Mj - Gata Only.mp3",
      language: "en"
    },
    {
      title: "Ocean drive",
      artist: "Duke Dumont",
      image: "/images/ocean-drive.jpg",
      file: "Duke Dumont - Ocean Drive.mp3",
      language: "en"
    },
    {
      title: "Back to me",
      artist: "Vanotek feat. Eneli",
      image: "/images/ocean-drive.jpg",
      file: "Vanotek feat. Eneli - Back To Me.mp3",
      language: "en"
    },
    {
      title: "Tattoo",
      artist: "Loreen",
      image: "/images/tatoo.jpg",
      file: "Loreen-Tattoo.mp3",
      language: "en"
    },
    {
      title: "Bir gajap",
      artist: "Қанат Ерлан",
      image: "/images/bir-gajap.jpg",
      file: "Қанат Ерлан - Bir gajap.mp3",
      language: "kz"
    },
    {
      title: "Eski suret",
      artist: "IL'HAN",
      image: "/images/eski-suret.jpg",
      file: "IL'HAN - Eski suret.mp3",
      language: "kz"
    },
    {
      title: "Zhańbyr",
      artist: "Dosekesh",
      image: "/images/zhanbyr.png",
      file: "Dosekesh - Zhańbyr.mp3",
      language: "kz"
    },
    {
      title: "Mars",
      artist: "IL'HAN",
      image: "/images/mars.jpg",
      file: "IL'HAN - Mars.mp3",
      language: "kz"
    }
  ];

  function getNextSongIndex(currentIndex) {
    const containers = document.querySelectorAll('.music-container');
    let nextIndex = currentIndex + 1;
    
    // Ищем следующую видимую песню
    while (nextIndex < containers.length) {
      const container = containers[nextIndex];
      if (currentFilter === 'all' || container.getAttribute('data-language') === currentFilter) {
        if (container.style.display !== 'none') {
          return nextIndex;
        }
      }
      nextIndex++;
    }
    
    // Если дошли до конца, начинаем сначала (возвращаем первую видимую песню)
    for (let i = 0; i < currentIndex; i++) {
      const container = containers[i];
      if (currentFilter === 'all' || container.getAttribute('data-language') === currentFilter) {
        if (container.style.display !== 'none') {
          return i;
        }
      }
    }
    
    // Если не найдено подходящих песен
    return -1;
  }

  function playSong(index) {
    // Остановить текущую песню, если есть
    if (currentSongIndex !== -1) {
      stopCurrentSong();
    }
    
    // Проверить, что индекс в допустимых пределах
    if (index < 0 || index >= songs.length) {
      currentSongIndex = -1;
      return;
    }
    
    // Воспроизвести новую песню
    currentSongIndex = index;
    const audioPlayer = document.querySelectorAll('.song-player audio')[index];
    audioPlayer.src = '/audio/' + songs[index].file;
    audioPlayer.play();
    document.querySelectorAll('.song-player')[index].classList.add('active');
    
    // Сохранить ссылку на аудиоплеер
    audioPlayers[index] = audioPlayer;
    
    // Настроить обработчик окончания песни
    audioPlayer.onended = function() {
      document.querySelectorAll('.song-player')[index].classList.remove('active');
      
      // Получаем индекс следующей песни
      const nextIndex = getNextSongIndex(index);
      
      // Если есть следующая песня - воспроизводим её
      if (nextIndex >= 0 && nextIndex < songs.length) {
        playSong(nextIndex);
      } else {
        currentSongIndex = -1;
      }
    };
  }

  function stopCurrentSong() {
    if (currentSongIndex !== -1 && audioPlayers[currentSongIndex]) {
      audioPlayers[currentSongIndex].pause();
      audioPlayers[currentSongIndex].currentTime = 0;
      document.querySelectorAll('.song-player')[currentSongIndex].classList.remove('active');
      currentSongIndex = -1;
    }
  }

  function toggleHeart(element) {
    element.classList.toggle("liked");
  }

  function filterSongs(language) {
    // Остановить текущую песню при переключении фильтра
    stopCurrentSong();
    
    currentFilter = language;
    
    // Обновить активную кнопку
    document.querySelectorAll('.filter-button').forEach(button => {
      button.classList.remove('active');
    });
    event.target.classList.add('active');
    
    // Показать/скрыть песни в соответствии с фильтром
    document.querySelectorAll('.music-container').forEach(container => {
      if (language === 'all' || container.getAttribute('data-language') === language) {
        container.style.display = 'flex';
      } else {
        container.style.display = 'none';
      }
    });
  }

  function playRandomSong() {
    let availableSongs = [];
    document.querySelectorAll('.music-container').forEach(container => {
      if (container.style.display !== 'none') {
        availableSongs.push(parseInt(container.getAttribute('data-index')));
      }
    });
    
    if (availableSongs.length === 0) return;
    
    let randomIndex;
    do {
      randomIndex = availableSongs[Math.floor(Math.random() * availableSongs.length)];
    } while (randomIndex === currentSongIndex && availableSongs.length > 1);
    
    playSong(randomIndex);
  }

  window.onload = function() {
    // Инициализировать все аудиоплееры
    document.querySelectorAll('.song-player audio').forEach(audio => {
      audioPlayers.push(audio);
    });
  };

  document.getElementById('random-button').addEventListener('click', playRandomSong);
</script>

</body>
</html>